## טוקנים וחלון הקשר – כמה המודל “רואה” בכל רגע

בפרק הזה נתמקד בשני מושגים קרובים:
- **טוקן (Token)** – יחידת הטקסט שהמודל עובד איתה.  
- **חלון הקשר (Context Window)** – כמה טוקנים המודל יכול לראות בבת אחת.

הבנה טובה שלהם מסבירה:
- למה שיחה לא יכולה להיות אינסופית,  
- למה לפעמים המודל “שוכח” דברים ישנים,  
- ומתי כדאי לפתוח צ’אט חדש.

---

### 1. מה זה טוקן?

טוקן הוא חלק קטן של טקסט:
- לפעמים מילה שלמה,  
- לפעמים חלק ממילה,  
- לפעמים סימן פיסוק.

המודל:
- לא “חושב במילים” כמו שאנחנו רגילים,  
- אלא ברצף של טוקנים – מספרים שמייצגים חלקי טקסט.

לכל מודל יש מגבלה:
- מקסימום מספר טוקנים שהוא יכול לקבל (קלט) ולייצר (פלט) יחד,  
- למשל: 8K, 32K, 200K טוקנים – תלוי בדגם.

---

### 2. מה זה חלון הקשר (Context Window)?

דמיינו חלון שקוף שאפשר לראות דרכו רק חלק מהשיחה:
- בתוך החלון נמצאים:
  - הוראות המערכת (System),  
  - מה שאתם כתבתם (User),  
  - מה שהמודל ענה עד עכשיו (Assistant).

המודל “מחזיק בראש” רק מה שנמצא בתוך החלון הזה ברגע נתון.  
אם השיחה קצרה – הכול בפנים.  
אם השיחה ארוכה מאוד – חלק מההתחלה כבר לא נכנס לחלון.

זהו **חלון הקשר**:
- הגודל המקסימלי של טוקנים שהמודל יכול לקחת בחשבון בכל צעד.

---

### 3. מה קורה כשעוברים את גבול החלון?

כשמספר הטוקנים הכולל חוצה את מגבלת החלון:
- מערכת ההפעלה של המודל צריכה **להסיר חלק מהטקסט**.  
- בדרך כלל:
  - נחתכים חלקים ישנים יותר מההתחלה,  
  - כדי לפנות מקום לטקסט חדש בסוף.

התוצאה:
- המודל כבר *לא רואה* חלק מהדברים שנאמרו בעבר,  
- ולכן יכול “לשכוח” הנחיות שנתתם,  
- או לשנות סגנון/תשובות באמצע השיחה.

זה מה שנקרא **חיתוך (Truncation)**, ומודול 03 הבא מתעמק בו.

---

### 4. למה זה חשוב בשימוש יומיומי?

כמה השלכות מעשיות:

-**חלון הקשר הוא משאב מוגבל**  
  - כל טקסט שאתם מוסיפים “תופס מקום” בחלון,  
  - לפעמים עדיף לקצר, לסכם או להדביק רק את החלקים החשובים באמת.

-**שיחות ארוכות מדי מתבלגנות**  
  - אחרי עשרות/מאות הודעות,  
  - חלק מהקשר נשמט מהחלון,  
  - והמודל נהיה פחות עקבי במה שהוא זוכר.

-**הנחיות חשובות צריך לחזור עליהן לפעמים**  
  - אם נתתם בתחילת השיחה הוראה קריטית (למשל: “תמיד לבדוק מקורות”),  
  - היא עלולה להיחתך אחרי זמן מה,  
  - לכן לפעמים כדאי להזכיר אותה מחדש.

-**עדיף לחלק עבודה ארוכה לכמה שיחות ממוקדות**  
  - במקום שיחה ענקית אחת שמתקרבת למגבלת הטוקנים של המודל,  
  - אפשר לנהל 3–4 שיחות, כל אחת סביב פרק/חלק אחר,  
  - ולסכם לעצמכם את הממצאים.

---

### 5. איך זה משפיע על עבודה עם מסמכים ופרויקטים ארוכים?

עד עכשיו דיברנו על **חלון הקשר** – כמה טקסט (קלט + שיחה קודמת + תשובה) המודל יכול “להחזיק בראש” ביחד.

חשוב לדעת שיש בדרך־כלל גם מגבלה נוספת:

- **מגבלת אורך לתשובה אחת (Output Tokens)**  
  - גם אם חלון הקשר גדול (למשל עשרות אלפי טוקנים),  
    כל תשובה בודדת יכולה להיות מוגבלת לאורך קצר יותר  
    (למשל אלפי טוקנים בודדים – נניח סדר גודל של 2,000–8,000 טוקנים, תלוי בכלי).  
  - פירוש הדבר:  
    - לפעמים המודל “יעצור באמצע” תשובה ארוכה,  
    - או שהממשק (Web UI) himself יקצר את ההודעה,  
      יציג רק חלק ממנה, או יבקש מכם “להמשיך מהנקודה שבה עצרת”.  
  - ככל שהזמן עובר, המגבלות האלה משתפרות ונעשות נדיבות יותר,  
    אבל **העיקרון נשאר**:  
    תמיד יש גבול לאורך התשובה, ולא ניתן לקבל “אינסוף טקסט ברצף אחד”.

לכן, כשעובדים עם מסמכים או פרויקטים ארוכים, צריך לזכור **שני סוגים של גבולות**:
- כמה המודל יכול לראות ביחד (חלון הקשר),  
- וכמה הוא יכול לכתוב בתשובה אחת (מגבלת הפלט).

עם זה בראש, אפשר לתכנן עבודה חכמה יותר.

---

#### 5.1 מסמך אחד ארוך

כשאתם מעלים מסמך ארוך מאוד:

- אם המודל תומך בהקשר ארוך (Long Context), הוא *יכול* לקרוא הרבה ממנו בבת אחת,  
- אבל:
  - ההתנהגות קרוב למגבלת האורך פחות צפויה,  
  - לפעמים הוא יתמקד בחלקים מסוימים ויתעלם מאחרים,  
  - ואם מבקשים סיכום “ענק”, התשובה עלולה להיחתך באמצע בגלל מגבלת אורך התשובה.

דפוס עבודה פשוט ובריא:

- לחלק מסמכים ארוכים לקטעים קטנים (פרקים / תתי-פרקים),  
- לעבוד בכל פעם על קטע אחד,  
- ורק אחר-כך לבקש חיבור בין הקטעים.

לדוגמה, אפשר לכתוב:

> “קרא/י את החלק הזה בלבד,  
>  תסכם/י אותו בשתי נקודות,  
>  ותציע/י 2 רעיונות איך להשתמש בזה בעבודה שלי.”

אחרי שסיימתם כמה קטעים, אפשר לבקש:

> “עכשיו חיברתי כמה סיכומים קצרים.  
>  תעזור/י לי לראות 3 קשרים או נושאים חוזרים ביניהם.”

אם אתם רואים שהתשובה נחתכת באמצע:

- אפשר לבקש: “תמשיך מהמשפט האחרון שכתבת”,  
- או מראש לבקש תשובות **קצרות יותר ומדורגות** (למשל: “עד 5 נקודות בלבד”).

---

#### 5.2 הרבה קבצים או פרויקט גדול

כשיש לכם *המון* קבצים (למשל: קורס שלם, קוד של פרויקט, מחקר עם הרבה נספחים):

- אי אפשר “לזרוק הכול בבת אחת” על המודל ולצפות שהוא יבין הכול.  
- יש מגבלות של:
  - גודל הקבצים,  
  - מספר הטוקנים (הקשר כולל),  
  - זמן חישוב ואורך תשובה.

במקרים כאלה עדיף:

- **להשקיע בארגון הקבצים**  
  - שמות ברורים לקבצים ותיקיות,  
  - חלוקה לפי נושא / פרק / חלק.  
  זה עוזר גם לכם וגם ל-AI.

- **לעבוד רקורסיבית (בקפיצות קטנות)**  
  1. קודם לבקש מה-AI לקרוא *מפת על* קצרה (README, סילבוס, תיאור הפרויקט).  
  2. לבחור קובץ אחד חשוב ולהעמיק בו.  
  3. לבקש סיכום, הערות, שאלות פתוחות.  
  4. רק אז לעבור לקובץ הבא, על בסיס מה שכבר הבנתם.

- **להכיר את המגבלות של הכלי**  
  בחלק מהכלים אפשר לעבוד עם *קבצי ZIP* או עם “סוכן” (Agent) שיודע לקרוא קבצים מתוך תיקייה.  
  גם שם יש מגבלה: הסוכן לא באמת “זוכר” לנצח – הוא עובד צעד-צעד לפי מה שמאפשרים לו,  
  ותמיד כפוף לחלון הקשר ולמגבלת אורך תשובה.  
  לכן עדיף לבקש משימות קטנות וברורות:

  > “תעבור רק על הקובץ X,  
  >  תסכם/י אותו בנקודות,  
  >  ותציע/י מה הקובץ הבא שכדאי לי לבדוק.”

לפעמים הפתרון הכי טוב הוא דווקא **לשלב כלים**:

- להשתמש ב-AI כדי לסכם ולהסביר,  
- להשתמש בחיפוש קבצים, עורך טקסט, או מערכת ניהול קוד  
  כדי לנווט בתוך הפרויקט,  
- ולחזור ל-AI עם קטעים ממוקדים בלבד.

הרעיון המרכזי:

- לא לנסות “לדחוף” לפרומפט אחד את כל הפרויקט,  
- ולא לצפות מתשובה אחת להיות “ספר שלם”,  
- אלא לפרק אותו לשלבים וקבצים,  
- ולהשתמש ב-AI כעוזר שעובר איתכם צעד-צעד.

**טיפ חשוב**

כשעובדים על פרויקטים גדולים בצאט, אפשר לדחוס אותם לקובצי ZIP
ולבקש מהצ’אט להשתמש בכלים שלו לקריאה ועבודה על הקבצים
במקום לענות בטקסט רגיל.
זה מאפשר עבודה חצי-אוטומטית ורקורסיבית על הפרויקט,
ולא רק תשובה חד-פעמית לפרומפט אחד. (כמו חצי סוכן רק באתר תחת הגבלות וללא גישה למערכת)

---

### 6. תרגיל – לזהות מתי החלון “נשבר”

נסו בשיחה אחת:

1. להתחיל בהנחיה ברורה (למשל: “תמיד לענות בעברית ולהוסיף דוגמה יומיומית”).  
2. לנהל שיחה ארוכה יחסית (20–30 הודעות),  
3. לשים לב מתי, אם בכלל, המודל:
   - מפסיק לענות בעברית,  
   - מפסיק לתת דוגמאות,  
   - מתחיל להתעלם מהנחיות ישנות.

אחר כך אפשר לשאול את המודל:

> “איזו מההנחיות שנתתי בתחילת השיחה אתה עדיין ‘רואה’ בהקשר?  
> אילו דברים נראה ששכחת?  
> ומה לדעתך כדאי לי לעשות בשיחות עתידיות כדי למנוע את זה?” 

זו דרך טובה לראות בפועל איך מגבלת חלון הקשר משפיעה על ההתנהגות,  
ולזכור שבשיחות ארוכות – יש יתרון לעיתים בלסכם ולפתוח צ’אט חדש.


### נספח למתקדמים: לשחק עם מודלים מקומיים

למי שרוצה *לחקור את התופעות מבפנים*, אפשר גם להריץ מודלי שפה על המחשב האישי:

-להורדת מודלים (בעיקר בקוד פתוח) אפשר להשתמש ב:

  -ה https://huggingface.co/models?pipeline_tag=text-generation&sort=trending

-להרצה נוחה של מודלים על המחשב:

  -ה https://lmstudio.ai/  
  בתוכנה עצמה יש גם אפשרות לחפש ולהוריד מודלים ישירות, בלי לגלוש לאתר חיצוני.

חשוב לדעת:
-מודלים קטנים (יחסית למודלים המסחריים הגדולים) טובים בעיקר ל:
  - מחקר,  
  - ניסוי וניפוי־טעויות,  
  - הבנה אינטואיטיבית של ההתנהגות שלהם.
- לרוב **לא מומלץ** להסתמך עליהם לעבודה מקצועית כבדה (למשל ייעוץ עסקי, רפואי, משפטי וכו’).  
- אפשר להשתמש בהם כ“מוח” בסיסי בתוך פרויקטים ותשתיות שאתם בונים בעצמכם –  
  אבל זה כבר נושא מתקדם, שדורש הבנה טובה יותר גם בטכנולוגיה וגם באבטחה ובהטיות.)
